<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <title>Peta Dakwah PHBI 1447 H</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet-minimap/dist/Control.MiniMap.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />

  <style>
    html, body {
      margin: 0; padding: 0; height: 100%; font-family: Arial;
    }

    /* HEADER */
    #header {
      width: 100%; height: 40px;
      background-color: #263238; color: white;
      display: flex; align-items: center; justify-content: center;
      font-weight: bold; font-size: 16px;
      position: fixed; top: 0; left: 0;
      z-index: 2000;
    }

    /* NAVBAR */
    #navbar {
      position: fixed;
      top: 40px; left: 0;
      width: 100%;
      height: 60px;
      background: #37474F;
      display: flex;
      align-items: center;
      padding: 0 10px;
      z-index: 1800;
    }

    #logo img {
      height: 40px;
      margin-right: 20px;
      border-radius: 4px;
    }

    #menu { flex: 1; }
    #menu ul {
      list-style: none;
      margin: 0; padding: 0;
      display: flex;
    }
    #menu ul li { position: relative; }
    #menu > ul > li > a {
      padding: 10px 18px;
      display: block;
      color: white;
      text-decoration: none;
    }
    #menu ul li:hover { background: #455A64; }

    /* Dropdown */
    #menu ul li ul {
      display: none;
      position: absolute;
      top: 60px;
      background: #455A64;
      min-width: 200px;
      padding: 0;
      z-index: 9999;
    }
    #menu ul li:hover ul,
    #menu ul li:focus-within ul {
      display: block;
    }
    #menu ul li ul li a {
      padding: 10px;
      display: block;
      color: white;
      text-decoration: none;
    }
    #menu ul li ul li:hover {
      background: #546E7A;
    }

    /* SEARCH */
    #searchContainer {
      width: 280px;
      margin-right: 10px;
    }

    #searchContainer .leaflet-control-geocoder {
      width: 100% !important;
      margin: 0 !important;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
    }

    /* MAP AREA */
    #map {
      position: absolute;
      top: 100px;
      bottom: 0;
      width: 100%;
      min-height: calc(100% - 100px);
      z-index: 1;
    }

    /* FOOTER KECIL */
    #credit {
      position: fixed;
      bottom: 42px;
      right: 10px;
      z-index: 1500;
      font-size: 12px;
      padding: 4px 6px;
      background:white;
      border-radius:4px;
      box-shadow:0 0 4px rgba(0,0,0,0.3);
    }

    /* FOOTER-BANNER BESAR */
    #footer-banner {
      width: 100%;
      background: #0b3d0b;
      color: white;
      text-align: center;
      padding: 12px 0;
      font-size: 16px;
      position: fixed;
      bottom: 0;
      left: 0;
      z-index: 2000;
    }

  </style>

</head>

<body>

<!-- HEADER -->
<div id="header">Peta Dakwah PHBI 1447 H</div>

<!-- NAVBAR -->
<div id="navbar">

  <!-- LOGO -->
  <div id="logo">
    <img src="phbi_web/logo_arridhwan.jpg" alt="Logo Ar Ridhwan">
  </div>

  <!-- MENU -->
  <div id="menu">
    <ul>

      <li><a href="puri.html">Home</a></li>

      <li>
        <a href="javascript:void(0)">Tentang ▼</a>
        <ul>
          <li><a href="phbi_web/profil.html">Profil PHBI 1447 H</a></li>
        </ul>
      </li>

      <li>
        <a href="javascript:void(0)">Zakat ▼</a>
        <ul>
          <li><a href="phbi_web/mustahiq.html">Pengusulan Mustahiq</a></li>
          <li><a href="phbi_web/penyaluran.html">Penyaluran</a></li>
          <li><a href="phbi_web/rekap.html">Rekapitulasi</a></li>
          <li><a href="phbi_web/zakatmal.html">Kalkulator Zakat Mal</a></li>
        </ul>
      </li>

      <li>
        <a href="javascript:void(0)">Kegiatan ▼</a>
        <ul>
          <li><a href="phbi_web/penceramah.html">Penceramah Tarawih</a></li>
          <li><a href="phbi_web/ifthor.html">Ifthor Jama'i</a></li>
          <li><a href="phbi_web/idulfitri.html">Idul Fitri</a></li>
        </ul>
      </li>

    </ul>
  </div>

  <!-- SEARCH -->
  <div id="searchContainer"></div>

</div>

<!-- MAP -->
<div id="map"></div>

<!-- FOOTER KECIL -->
<div id="credit">phbi1447@2025</div>

<!-- FOOTER-BANNER -->
<div id="footer-banner">
  <b><i>Menjalin Ukhuwah, Menggapai Mardhatillah</i></b>
</div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-minimap/dist/Control.MiniMap.min.js"></script>
<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

<script>
  // ============================
  // CENTER PETA
  // ============================
  var centerPoint = [-6.470496, 106.845458];

  var map = L.map("map", {
    center: centerPoint,
    zoom: 17
  });

  // Basemap
  var osm = L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);
  var googleSat = L.tileLayer(
    "https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",
    { subdomains: ["mt0","mt1","mt2","mt3"], maxZoom: 20 }
  );

  // POI
  var poiData = [
    { name: "Masjid Ar Ridhwan (Center)", coords: centerPoint },
    { name: "Gerbang Puri Nirwana 1", coords: [-6.472532, 106.843382] },
    { name: "Bendahara PHBI 1447 H", coords: [-6.471600, 106.845780] },
    { name: "Ketua PHBI 1447 H", coords: [-6.469643, 106.846070] }
  ];

  var poiLayer = L.layerGroup();
  poiData.forEach(pt => {
    L.marker(pt.coords).bindPopup("<b>"+pt.name+"</b>").addTo(poiLayer);
  });
  poiLayer.addTo(map);

  // Jalan utama
  var jalanLayer = L.geoJSON({
    "type":"FeatureCollection",
    "features":[{
      "type":"Feature",
      "properties":{"Name":"Jalan Utama Puri Nirwana 1"},
      "geometry":{
        "type":"LineString",
        "coordinates":[
          [106.845421, -6.468524],
          [106.844723, -6.472447],
          [106.843382, -6.472532]
        ]
      }
    }]
  },{
    style:{ color:"#f44336", weight:4 }
  }).addTo(map);

  // Polygon perumahan
  var puriLayer = L.geoJSON({
    "type":"FeatureCollection",
    "features":[{
      "type":"Feature",
      "properties":{"Name":"Puri Nirwana 1"},
      "geometry":{
        "type":"Polygon",
        "coordinates":[[
          [106.844112, -6.468311],
          [106.845764, -6.468657],
          [106.845839, -6.469051], 
          [106.847062, -6.469350],
          [106.846810, -6.470426],
          [106.846622, -6.470373],
          [106.845742, -6.473069],
          [106.844949, -6.473479],
          [106.844814, -6.475003],
          [106.844262, -6.472717],
          [106.843286, -6.472627],
          [106.843243, -6.472243],
          [106.844552, -6.472105],
          [106.844112, -6.468311]
        ]]
      }
    }]
  },{
    style:{
      color:"#1b5e20",
      weight:3,
      fillColor:"#66bb6a",
      fillOpacity:0.35
    }
  }).addTo(map);

  // Layer control
  L.control.layers(
    { "OpenStreetMap": osm, "Google Satellite": googleSat },
    { "Puri Nirwana 1": puriLayer, "Jalan Utama": jalanLayer },
    { collapsed:false }
  ).addTo(map);

  // Scale
  L.control.scale().addTo(map);

  // Inset
  new L.Control.MiniMap(
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"),
    { toggleDisplay:true }
  ).addTo(map);

  // Search bar
  var geocoder = L.Control.geocoder({ defaultMarkGeocode:true });
  geocoder.addTo(map);

  var searchElement = document.querySelector(".leaflet-control-geocoder");
  document.getElementById("searchContainer").appendChild(searchElement);

  // Klik koordinat
  map.on("click", e=>{
    L.popup()
      .setLatLng(e.latlng)
      .setContent("Lat: "+e.latlng.lat.toFixed(6)+"<br>Lng: "+e.latlng.lng.toFixed(6))
      .openOn(map);
  });

  // Popup default
  L.marker(centerPoint).bindPopup("<b>Masjid Ar Ridhwan</b>").addTo(map).openPopup();

</script>

</body>
</html>
